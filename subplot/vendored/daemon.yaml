- given: there is no "{args:text}" process
  function: daemon_no_such_process

- given: a daemon helper shell script {filename}
  function: _daemon_shell_script

- when: I start "{path}{args:text}" as a background process as {name}, on port {port}
  function: daemon_start_on_port

- when: I try to start "{path}{args:text}" as {name}, on port {port}
  function: _daemon_start_soonish
  cleanup: _daemon_stop_soonish

- when: I start "{path}{args:text}" as a background process as {name}
  function: _daemon_start

- when: I stop background process {name}
  function: daemon_stop

- when: daemon {name} has produced output
  function: daemon_has_produced_output

- then: a process "{args:text}" is running
  function: daemon_process_exists

- then: there is no "{args:text}" process
  function: daemon_no_such_process

- then: starting daemon fails with "{message:text}"
  function: daemon_start_fails_with

- then: daemon {name} stdout is "{text:text}"
  function: daemon_stdout_is

- then: daemon {name} stderr is "{text:text}"
  function: daemon_stderr_is
  
